<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li:not(:nth-child(2)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li > a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(2) > ul > li:nth-child(2) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(2) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(2) > ul > li:nth-child(2) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(2) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(2) > ul.nav-list > li.nav-list-item:nth-child(2) > ul.nav-list { display: block; } </style> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Authentication | IndEcX Documentation</title> <meta name="generator" content="Jekyll v4.3.3" /> <meta property="og:title" content="Authentication" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Documentation and description for the development details of the IndEcX project" /> <meta property="og:description" content="Documentation and description for the development details of the IndEcX project" /> <link rel="canonical" href="https://hazimhussein.github.io/db_project_indecol//docs/backend/auth" /> <meta property="og:url" content="https://hazimhussein.github.io/db_project_indecol//docs/backend/auth" /> <meta property="og:site_name" content="IndEcX Documentation" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Authentication" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Documentation and description for the development details of the IndEcX project","headline":"Authentication","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://hazimhussein.github.io/db_project_indecol//images/logo.png"}},"url":"https://hazimhussein.github.io/db_project_indecol//docs/backend/auth"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> <div class="site-logo" role="img" aria-label="IndEcX Documentation"></div> </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Overview</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Backend category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/backend" class="nav-list-link">Backend</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/backend/settings" class="nav-list-link">General Configurations</a></li><li class="nav-list-item"><a href="/docs/backend/auth" class="nav-list-link">Authentication</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in app_indecol category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/backend/app_indecol/app_indecol.html" class="nav-list-link">app_indecol</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/backend/app_indecol/models" class="nav-list-link">Models</a> </li><li class="nav-list-item"> <a href="/docs/backend/app_indecol/serializer" class="nav-list-link">Serilaizers</a> </li><li class="nav-list-item"> <a href="/docs/backend/app_indecol/api" class="nav-list-link">API Endpoits</a> </li><li class="nav-list-item"> <a href="/docs/backend/app_indecol/admin" class="nav-list-link">Admin</a> </li><li class="nav-list-item"> <a href="/docs/backend/app_indecol/urls" class="nav-list-link">URLs</a> </li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Frontend category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/frontend" class="nav-list-link">Frontend</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/frontend/reducers" class="nav-list-link">Reducers</a></li><li class="nav-list-item"><a href="/docs/frontend/components" class="nav-list-link">Components</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Utilities category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/frontend/utils" class="nav-list-link">Utilities</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/frontend/utils/api" class="nav-list-link">API</a> </li><li class="nav-list-item"> <a href="/docs/frontend/utils/helpers" class="nav-list-link">Helpers</a> </li></ul></li></ul></li><li class="nav-list-item"><a href="/docs/deployment" class="nav-list-link">Deployment</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search IndEcX Documentation" aria-label="Search IndEcX Documentation" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/NTNU-IndEcol/IndEcX" class="site-button" > Repository </a> </li> </ul> </nav> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/docs/backend">Backend</a></li> <li class="breadcrumb-nav-list-item"><span>Authentication</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="authentication-ldap"> <a href="#authentication-ldap" class="anchor-heading" aria-labelledby="authentication-ldap"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Authentication (LDAP) </h1> <p>This project utilizes authentication through NTNU Lightweight Active Directory (LDAP), <a href="https://www.ntnu.no/wiki/pages/viewpage.action?spaceKey=iedl&amp;title=LDAP%3A+Query+NTNU%27s+Active+Directory">explained by Esme Maxwell in indecol wiki</a>, by using the third party tool <a href="https://github.com/etianen/django-python3-ldap">django-python3-ldap</a> to incorporate it into the django project.</p> <p>The settings for the tool are defined inside</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>├───project
│   │   settings.py 
</code></pre></div></div> <p>The variables related to it are:</p> <ul> <li> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>AUTH_USER_MODEL
</code></pre></div> </div> <p>where the table for storing and retrieving users is defined</p> </li> <li> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>AUTHENTICATION_BACKENDS
</code></pre></div> </div> <p>the tool is added to the list of backends that django should use for authentication</p> </li> <li> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>LDAP_AUTH_URL
</code></pre></div> </div> <p>where NTNU LDAP url is defined</p> </li> <li> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>LDAP_AUTH_USE_TLS
LDAP_AUTH_TLS_VERSION
</code></pre></div> </div> <p>to use secure connection while authentication</p> </li> <li> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>LDAP_AUTH_SEARCH_BASE
</code></pre></div> </div> <p>to specify ldap search base, for NTNU there are two options</p> </li> <li>“ou=people,dc=ntnu,dc=no”: returns many information (first/last name, email,…), but limited regarding the accounts publically available through it, as individuals have to allow it manually through studentweb.</li> <li>“ou=users,dc=ntnu,dc=no”: restricted information (name, but no email) but encompass all NTNU accounts, this is the current used option</li> <li> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>LDAP_AUTH_OBJECT_CLASS
</code></pre></div> </div> <p>the object to return from the ldap search</p> </li> <li> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>LDAP_AUTH_USER_FIELDS
</code></pre></div> </div> <p>the field names in the database table and the corresponding name in the ldap object</p> </li> <li> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>LDAP_AUTH_USER_LOOKUP_FIELDS
</code></pre></div> </div> <p>the field name (using the above defined fields) used to look for the user</p> </li> <li> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>LDAP_AUTH_CONNECTION_USERNAME
LDAP_AUTH_CONNECTION_PASSWORD
</code></pre></div> </div> <p>they are set to <code class="language-plaintext highlighter-rouge">None</code> as this is an unbound ldap query</p> </li> <li> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>LDAP_AUTH_FORMAT_SEARCH_FILTERS
</code></pre></div> </div> <p>points to a custom function to use to modify the ldap search further. The function <code class="language-plaintext highlighter-rouge">custom_format_search_filters</code> is saved in:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>├───project
│   ├───utils
│   │   │   ldap_search.py
</code></pre></div> </div> <p>currently, there is no additional filters used. It was created to initialize the database with users from indecol using the filter <code class="language-plaintext highlighter-rouge">"(|(ntnuMemberOf=ioko))"</code>, the code for it is commented in the function. To sync users into the database manually without them logging in, specify some filters in the above function, to not sync all NTNU accounts, and then run the command:<br /> <code class="language-plaintext highlighter-rouge">python manage.py ldap_sync_users</code><br /> To grant any of the users admin permissions (recommended: to do it through the app GUI or admin page) through the terminal, run:<br /> <code class="language-plaintext highlighter-rouge">python manage.py ldap_promote &lt;username&gt;</code></p> </li> <li> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>LOGGING
</code></pre></div> </div> <p>to help debug ldap authentication in development</p> </li> </ul> <h1 id="authentication-custom"> <a href="#authentication-custom" class="anchor-heading" aria-labelledby="authentication-custom"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Authentication (Custom) </h1> <p>A custom authentication method is created to allow manual addition of external users, not associated with NTNU, which allows authentication using email/username and password. This is implemented in:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>├───app_indecol
│   │   backends.py
</code></pre></div></div> <p>Then it was added to the project settings to the list of authentication backends, in the file:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>├───project
│   │   settings.py 
</code></pre></div></div> <p>in the variable <code class="language-plaintext highlighter-rouge">AUTHENTICATION_BACKENDS</code></p> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
